uniform sampler2D SCREEN_TEXTURE;
uniform highp vec3 ColorFilter;
uniform highp float Desaturation;
uniform highp vec3 ColorShift;

void fragment() {
    highp vec4 color = texture(SCREEN_TEXTURE, UV);

    color.rgb += ColorShift;
    color.rgb *= ColorFilter;

    highp float luminance = dot(color.rgb, vec3(0.299, 0.587, 0.114));

    color.rgb = mix(color.rgb, vec3(luminance), Desaturation);

    COLOR = color;
}
